<div class="uk-child-width-expand@s" uk-grid><div class="uk-first-column"><div class="uk-card uk-card-body"><div class="uk-child-width-expand@s" uk-grid><!-- Img --><div class="uk-width-1-5@m"><img id="img" class="profile-img" alt="" uk-img></div><!-- Dati Profilo --><div><h3 class="uk-card-title">{{client.name}} {{client.surname}} <a class="uk-icon-button" ng-click="edit()" uk-icon="pencil"></a></h3><p><strong>M</strong> | {{client.age}} anni | {{client.phone}} | {{client.email}} | {{lastSubscription.sport.name}} | {{lastSubscription.sport.maxEntrance}} ingressi settimanali | Iscritto fino al {{client.expirationDate}} | Certificato valido fino al {{client.certificateExpirationDate}}</p><div class="js-upload uk-padding" uk-form-custom><input id="file" class="inputfile" type="file" name="file" onchange="angular.element(this).scope().uploadFile(this.files)"> <button class="uk-button uk-button-primary" type="button" tabindex="-1">Carica Foto</button></div><button class="uk-button uk-button-default uk-margin-small-right" ng-class="{'uk-alert-warning': isAlert(client.expirationDate), 'uk-alert-danger' : isExpired(client.expirationDate)}" type="button" uk-toggle="target: #subscription">Abbonamento</button> <button class="uk-button uk-button-default uk-margin-small-right" ng-class="{'uk-alert-warning': isAlert(client.certificateExpirationDate), 'uk-alert-danger' : isExpired(client.certificateExpirationDate)}" type="button" uk-toggle="target: #certificate">Certificato</button> <button ng-disabled="lastSubscription.sport.maxEntrance <= entrances.length" class="uk-button uk-button-default uk-margin-small-right" type="button" uk-toggle="target: #ingresso">Ingresso</button></div></div><!-- Sezione Dati Profilo --><div class="uk-child-width-expand@s" uk-grid><div class="uk-first-column"><!-- Max Entrance Alert --><p ng-show="maxEntrance" class="uk-margin uk-alert-danger">{{maxEntranceMsg}}</p><!-- Tabella Ingressi --><p class="uk-card-title">Ingressi Settimanali ({{entrances.length}})</p><table class="uk-table uk-table-small uk-table-hover uk-table-divider"><tbody><tr ng-repeat="row in entrances"><td>{{row.date | date : 'dd MMM yyyy'}}</td><td class="uk-text-right"><button class="uk-button uk-button-small uk-button-danger" type="button">Rimuovi</button></td></tr></tbody></table><!-- Tabella Acquisti --><p class="uk-card-title">Prodotti</p><table class="uk-table uk-table-small uk-table-hover uk-table-divider"><tbody><tr ng-repeat="row in subscriptions"><td>{{row.fromDate | date : 'dd MMM yyyy'}}</td><td>{{row.description}}</td><td>{{row.price | number: 2}} Eur</td></tr></tbody></table></div></div></div></div></div><!-- Subscription Modal --><div id="subscription" uk-modal><div class="uk-modal-dialog uk-modal-body"><h2 class="uk-modal-title">Rinnovo Abbonamento</h2><form class="uk-form-stacked"><!-- From Date --><div class="uk-margin"><label class="uk-form-label" for="from">Data di inizio:</label> <input id="from" ng-model="subscription.fromDate" class="uk-input uk-form-width-large" type="date" min="{{lastSubscription.toDate | date: 'yyyy-MM-dd'}}" onkeydown="return false" ng-change="changeFromDate(subscription.fromDate)" required></div><!-- To Date --><div class="uk-margin"><label class="uk-form-label" for="to">Data di fine:</label> <input id="to" ng-model="subscription.toDate" class="uk-input uk-form-width-large" type="date" disabled="disabled" required></div><!-- Durata --><div class="uk-margin"><label class="uk-form-label" for="durata">Durata:</label> <select id="durata" class="uk-select" ng-model="subscription.month" ng-change="changeFromDate(subscription.fromDate); computeTotalPrice(subscription)"><option ng-repeat="month in months" ng-value="month">{{month.description}}</option></select></div><!-- Sport --><div class="uk-margin"><label class="uk-form-label" for="sport">Abbonamento:</label> <select id="sport" class="uk-select" ng-model="subscription.sport" ng-change="computeTotalPrice(subscription)"><option ng-repeat="sport in sports" ng-value="sport">{{sport.name}}</option></select></div><!-- To Date --><div class="uk-margin"><label class="uk-form-label" for="total">Totale:</label> <input id="total" ng-model="subscription.price" class="uk-input uk-form-width-large" disabled="disabled" required></div></form><p class="uk-text-right"><button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button> <button class="uk-button uk-button-primary uk-modal-close" type="button" ng-click="addSubscription(subscription)">Save</button></p></div></div><!-- Certificate Modal --><div id="certificate" uk-modal><div class="uk-modal-dialog uk-modal-body"><h2 class="uk-modal-title">Rinnovo Certificato</h2><p>* Conservare copia del certificato medico</p><form><!-- Date --><div class="uk-margin"><label class="uk-form-label" for="certificateDate">Data di scadenza:</label> <input id="certificateDate" ng-model="client.certificateExpirationDate" ng-change="changeDate(client.certificateExpirationDate)" class="uk-input uk-form-width-large" type="date" required></div></form><p class="uk-text-right"><button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button> <button class="uk-button uk-button-primary uk-modal-close" type="button" ng-click="addCertificate(client)">Save</button></p></div></div><!-- Ingresso Modal --><div id="ingresso" uk-modal><div class="uk-modal-dialog uk-modal-body"><h2 class="uk-modal-title">Ingresso</h2><p>Sei sicuro di voler confermare l'ingresso dell'utente ?</p><p class="uk-text-right"><button class="uk-button uk-button-default uk-modal-close" type="button">Cancella</button> <button class="uk-button uk-button-primary uk-modal-close" type="button" ng-click="addEntrance(client)">Conferma</button></p></div></div>